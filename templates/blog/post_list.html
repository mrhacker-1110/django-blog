{% extends 'blog/base.html' %}
{% block title %}Посты — MyBlog{% endblock %}
{% block content %}
<div class="row g-3">
  {% for post in posts %}
  <div class="col-md-6">
    <div class="card h-100 shadow-sm">
      <div class="card-body">
        <h5 class="card-title"><a href="{{ post.get_absolute_url }}" class="text-decoration-none text-dark">{{ post.title }}</a></h5>
        <p class="card-text text-muted small">{{ post.text|truncatechars:140 }}</p>
      </div>
      <div class="card-footer d-flex justify-content-between align-items-center">
        <div class="small text-muted">Автор: {{ post.author }} • {{ post.created_at|date:"d M Y" }}</div>
        <div>
          {% for c in post.categories.all %}
            <a href="{{ c.get_absolute_url }}" class="badge bg-secondary text-decoration-none">{{ c.name }}</a>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  {% empty %}
    <p>Постов пока нет.</p>
  {% endfor %}
</div>

<nav class="mt-4">
  {% if is_paginated %}
    <ul class="pagination">
      {% if page_obj.has_previous %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Назад</a></li>
      {% endif %}
      <li class="page-item disabled"><span class="page-link">Стр {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span></li>
      {% if page_obj.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Вперёд</a></li>
      {% endif %}
    </ul>
  {% endif %}
</nav>
{% endblock %}
